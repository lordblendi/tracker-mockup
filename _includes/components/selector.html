<!-- splitting up the data into multiple items. separator ; -->
{% assign data = include.selectorData | split: ";" %}

<div class="selector JS_selector {% if include.expanded %} selector--expanded {% endif %} {% if include.singleselect %} selector--singleselect {% endif %} {% if include.multiselect %} selector--multiselect {% endif %} {% if include.popupId %} JS_has-popup {% endif %}"
{% if include.popupId %} data-popid="include.popupId" {% endif %}>
<!-- for loop through items -->
{% for item in data %}
  <!-- getting the variables from the items. separator , -->
  {% assign itemData = item | split: "," %}
  <!-- assign color variable if there is a color -->
  {% if itemData[0] != "" %}
    {% assign color = "style='background-color: "| append: {{itemData[0]}} | append: ";'" %}
  {% else %}
    {% assign color = "" %}
  {% endif %}

  {% assign prefix = itemData[1] %}
  {% assign label = itemData[2] %}
  {% assign field = itemData[3] %}

  {% assign colorSize = color | size %}
  {% assign prefixSize = prefix | size %}
  {% assign labelSize = label | size %}
  {% assign fieldSize = field | size %}

  <!-- add itemSeparator if it's multiple items -->
  {% if forloop.index > 1 %}
    <div class="selector__itemSeperator"></div>
  {% endif %}
  <div class="selector__item JS_selectorItem {% if include.selectedIndex == forloop.index %} selector__item--selected JS_selectorItem--active {% endif %}">
    <div class="selector__block">
      <!-- only show item parts if they are at least 1 character long -->
      {% if prefixSize > 0 %}
        <div class="selector__blockPart selector__blockPart--prefix" {{color}} >{{prefix}}</div>
      {% endif %}
      {% if labelSize > 0  %}
        <div class="selector__blockPart selector__blockPart--label">{{label}}</div>
      {% endif %}
      {% if fieldSize > 0   %}
        {% if labelSize > 0   %}
          <div class="selector__blockSeperator"></div>
        {% endif %}
        <div class="selector__blockPart selector__blockPart--field">{{field}}</div>

      {% endif %}
    </div>
  </div>
{% endfor %}
</div>
