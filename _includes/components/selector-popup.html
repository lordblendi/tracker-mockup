<!-- splitting up the data into multiple items. separator ; -->
{% assign data = include.selectorData | split: ";" %}

<!-- assign different classses depending on the flags -->
<!-- singlselect class -->
{% assign singleselect = "" %}
{% if include.singleselect %}
  {% assign singleselect = "selector--singleselect" %}
{% endif %}
<!-- multiselect class -->
{% assign multiselect = "" %}
{% if include.multiselect %}
  {% assign multiselect = "selector--multiselect" %}
{% endif %}

<!-- if it's a popup, add data-popid -->
<div class="selector JS_has-popup {{singleselect}} {{multiselect}}" data-popid="{{include.popupId}}">
  <div class="selector__item JS_selectorItem selector__item--selected JS_selectorItem--active">
    <div class="selector__block">

      <!-- for loop through selectorItems -->
      {% for item in data %}
        <!-- getting the variables from the items. separator , -->
        {% assign itemData = item | split: "," %}
        <!-- assign color variable if there is a color -->
        {% assign color = "" %}
        {% if itemData[0] != "" %}
          {% assign color = "style='background-color: "| append: {{itemData[0]}} | append: ";'" %}
        {% endif %}
        {% assign prefix = itemData[1] %}
        {% assign label = itemData[2] %}
        {% assign field = itemData[3] %}

        <!-- assign variables for the length of items -->
        {% assign colorSize = color | size %}
        {% assign prefixSize = prefix | size %}
        {% assign labelSize = label | size %}
        {% assign fieldSize = field | size %}

        <!-- add itemSeparator if it's multiple items -->
        {% if forloop.index > 1 %}
          <div class="selector__itemSeperator"></div>
        {% endif %}

        <!-- only show item parts if they are at least 1 character long -->
        <!-- if there is a prefix or color, show prefix -->
        {% if prefixSize > 0 or colorSize > 0 %}
          <div class="selector__blockPart selector__blockPart--prefix" {{color}} >{{prefix}}</div>
        {% endif %}
        <!-- if there is a label, show label -->
        {% if labelSize > 0 %}
          <div class="selector__blockPart selector__blockPart--label">{{label}}</div>
        {% endif %}
        <!-- if there is a field, show field -->
        {% if fieldSize > 0 %}
          <!-- if there is a field AND a label, show blockSeparator -->
          {% if labelSize > 0 %}
            <div class="selector__blockSeperator"></div>
          {% endif %}
          <div class="selector__blockPart selector__blockPart--field">{{field}}</div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</div>
